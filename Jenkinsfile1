pipeline {
    agent any
    parameters {
        string(name: 'project_name', defaultValue: 'Packer Pipeline', description: 'Jenkins Pipeline for terraform?')
    }
    environment {
        terraform_version = '1.2.4'
        packer_version = '1.8.2'
        access_key = 'input_your_access_key'
        secret_key = 'input_your_secret_key'
    }
    stages {
          stage('Install Terraform') {
              steps {  
                    sh "sudo apt update"                           
                    sh "sudo apt install  software-properties-common gnupg2 curl"
                    sh "curl https://apt.releases.hashicorp.com/gpg | gpg --dearmor > hashicorp.gpg"
                    sh "sudo install -o root -g root -m 644 hashicorp.gpg /etc/apt/trusted.gpg.d/"
                    sh "sudo apt-add-repository "deb [arch=$(dpkg --print-architecture)] https://apt.releases.hashicorp.com focal main""
                    sh "sudo apt update"
                    sh "sudo apt install terraform -y"
              }
          }
          stage('code checkout') {
              steps {
                    git branch: 'main', url: 'https://github.com/Patlollavinod/TPJ_jenkins.git'
              }
           }
     }
}
